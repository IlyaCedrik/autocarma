# üöó AutoKarma Bot

Telegram –±–æ—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—Ä–º—ã –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –ø–æ –Ω–æ–º–µ—Ä–Ω—ã–º –∑–Ω–∞–∫–∞–º.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

AutoKarma Bot –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:
- üîç **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞—Ä–º—É –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π** –ø–æ –Ω–æ–º–µ—Ä–Ω—ã–º –∑–Ω–∞–∫–∞–º
- üìù **–û—Ü–µ–Ω–∏–≤–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª–µ–π** (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ)
- üèÜ **–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–æ–ø—ã** –ª—É—á—à–∏—Ö –∏ —Ö—É–¥—à–∏—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π  
- üìà **–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** –≤ —Å–∏—Å—Ç–µ–º–µ –æ—Ü–µ–Ω–æ–∫

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–æ–∫
- üòá **–û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ**: +3 –∫ –∫–∞—Ä–º–µ
- üëç **–•–æ—Ä–æ—à–æ**: +1 –∫ –∫–∞—Ä–º–µ
- üëé **–ü–ª–æ—Ö–æ**: -1 –∫ –∫–∞—Ä–º–µ  
- üò° **–û—á–µ–Ω—å –ø–ª–æ—Ö–æ**: -3 –∫ –∫–∞—Ä–º–µ

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –Ω–æ–º–µ—Ä–æ–≤
- –†–æ—Å—Å–∏–π—Å–∫–∏–µ –Ω–æ–º–µ—Ä–∞: `–ê123–í–°777`
- –õ–∞—Ç–∏–Ω—Å–∫–∏–µ –Ω–æ–º–µ—Ä–∞: `M456KX199`
- –†–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω
- –ü—Ä–æ–±–µ–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** + **Express** - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å
- **Telegraf** - Telegram Bot API
- **Supabase** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- **Docker** –≥–æ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <repository-url>
cd autokarma-telegram-bot
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
BOT_TOKEN=your_telegram_bot_token
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
WEBHOOK_URL=your_webhook_url (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
PORT=3000
NODE_ENV=development
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run db:migrate

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run seed
```

### 5. –ó–∞–ø—É—Å–∫
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (polling mode)
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω (webhook mode)
npm start
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ karma.js          # –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ karma.js          # Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.js           # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ messageManager.js # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
‚îÇ       ‚îî‚îÄ‚îÄ navigation.js     # –ù–∞–≤–∏–≥–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ supabase.js          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.js          # –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CarKarma.js      # –ú–æ–¥–µ–ª—å –∫–∞—Ä–º—ã –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ seed.js              # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îî‚îÄ‚îÄ index.js                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

## üóÑÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö Telegram

### –¢–∞–±–ª–∏—Ü–∞ `car_karma`
- –ù–æ–º–µ—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏ –∏—Ö –∫–∞—Ä–º–∞
- –°—á–µ—Ç—á–∏–∫–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö/–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫

### –¢–∞–±–ª–∏—Ü–∞ `karma_actions`
- –õ–æ–≥ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–∞–≤—Ç–æ–º–æ–±–∏–ª—å-–æ—Ü–µ–Ω–∫–∞

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥—ã
- `/start` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–ª–æ—É
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ä–º—ã**: –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä ‚Üí –ø–æ–ª—É—á–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
2. **–û—Ü–µ–Ω–∫–∞ –≤–æ–¥–∏—Ç–µ–ª—è**: –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ—Ü–µ–Ω–∫–∏
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–ø–æ–≤**: –õ—É—á—à–∏–µ/—Ö—É–¥—à–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏ –ø–æ –∫–∞—Ä–º–µ
4. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –æ—Ü–µ–Ω–æ–∫

## üîß API Endpoints

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—Ç–∞ –∏ –ë–î
- `POST /webhook` - Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π Telegram

## üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker
```bash
docker build -t autokarma-bot .
docker run -p 3000:3000 --env-file .env autokarma-bot
```

### Railway/Heroku
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook URL
4. –î–µ–ø–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegraf –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://telegraf.js.org/)
- [Supabase –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://supabase.com/docs)
- [Telegram Bot API](https://core.telegram.org/bots/api)

---

–°–æ–∑–¥–∞–Ω —Å ‚ù§Ô∏è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö üöóüíô 