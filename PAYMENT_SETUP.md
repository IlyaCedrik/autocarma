# üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π –≤ Telegram Bot

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)**
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ:** `/mybots`
3. **–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞**
4. **Bot Settings ‚Üí Payments**
5. **–í—ã–±–µ—Ä–∏—Ç–µ "Stripe TEST"** (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
6. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω**

## üìù –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```bash
# –í BotFather:
/mybots ‚Üí –í–∞—à –±–æ—Ç ‚Üí Bot Settings ‚Üí Payments ‚Üí Stripe TEST

# –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤–∏–¥–∞:
284685063:TEST:YWY0NGJlMzEwMmI2
```

### 2. YooKassa (–¥–ª—è –†–æ—Å—Å–∏–∏)

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
   - –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [yookassa.ru](https://yookassa.ru)
   - –°–æ–∑–¥–∞–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω
   - –ü—Ä–æ–π–¥–∏—Ç–µ –º–æ–¥–µ—Ä–∞—Ü–∏—é

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π:**
   ```
   Shop ID: 123456
   Secret Key: test_ABCDEF123456789
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ BotFather:**
   ```
   /mybots ‚Üí –í–∞—à –±–æ—Ç ‚Üí Bot Settings ‚Üí Payments ‚Üí YooKassa
   –í–≤–µ–¥–∏—Ç–µ Shop ID –∏ Secret Key
   ```

### 3. Stripe (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π)

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
   - –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [stripe.com](https://stripe.com)
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π:**
   ```
   Publishable key: pk_test_ABCDEF123456789
   Secret key: sk_test_ABCDEF123456789
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ BotFather:**
   ```
   /mybots ‚Üí –í–∞—à –±–æ—Ç ‚Üí Bot Settings ‚Üí Payments ‚Üí Stripe
   –í–≤–µ–¥–∏—Ç–µ Publishable key –∏ Secret key
   ```

## ‚ö° –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç–µ `.env`:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ:
TELEGRAM_PAYMENT_TOKEN=test_payment_token

# –ù–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω:
TELEGRAM_PAYMENT_TOKEN=284685063:TEST:YWY0NGJlMzEwMmI2
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª
# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
npm run dev

# 3. –í Telegram:
/start ‚Üí –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é ‚Üí –û–ø–ª–∞—Ç–∏—Ç—å
```

## üí° –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã

### Stripe TEST:
```
–ù–æ–º–µ—Ä: 4242 4242 4242 4242
MM/YY: 12/34
CVC: 123
```

### YooKassa TEST:
```
–ù–æ–º–µ—Ä: 5555 5555 5555 4444
MM/YY: 12/24
CVC: 123
```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–¢–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã** —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏
2. **–ü—Ä–æ–¥–∞–∫—à–µ–Ω —Ç–æ–∫–µ–Ω—ã** —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç–æ—è—â–∏–µ –∫–∞—Ä—Ç—ã –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—é
3. **Webhook'–∏** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Telegram
4. **–ö–æ–º–∏—Å—Å–∏–∏** –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ö–æ–º–∏—Å—Å–∏—è | –†–µ–≥–∏–æ–Ω—ã | –ú–æ–¥–µ—Ä–∞—Ü–∏—è |
|-----------|----------|---------|-----------|
| **Stripe TEST** | 0% | üåç | –ù–µ—Ç |
| **YooKassa** | 2.8% | üá∑üá∫ | –î–∞ |
| **Stripe** | 2.9% + $0.30 | üåç | –î–∞ |

## üîß –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

| –û—à–∏–±–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|
| `PAYMENT_PROVIDER_INVALID` | –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ `.env` |
| `Bad Request: CURRENCY_TOTAL_AMOUNT_INVALID` | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É–º–º—É (–≤ –∫–æ–ø–µ–π–∫–∞—Ö) |
| `Bad Request: PROVIDER_DATA_INVALID` | –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ | 